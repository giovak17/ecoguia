{% extends "administradores/base.html" %}
<title>{% block title %} Aprobar recicladoras {% endblock %}</title>

{% block content %}
<div class="head-title">
  <div class="left">
    <h1>Solicitudes de recicladoras</h1>
    <ul class="breadcrumb">
      <li><a href="{% url 'administradores:index' %}">Administrador</a></li>
      <li><i class='bx bx-chevron-right'></i></li>
      <li><a class="active" href="{% url 'administradores:index' %}">Solicitudes</a></li>
    </ul>
  </div>
</div>

{% if success %}
  <div class="alert alert-success alert-dismissible fade show text-center" role="alert">
    Cambios aplicados de manera exitosa.
    <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Cerrar"></button>
  </div>
{% endif %}

<div class="table-data">
  <div class="order">
    <div class="head">
      <h3>Solicitudes</h3>
    </div>

    {% if recicladoras %}
      <table>
        <thead>
          <tr>
            <th>Codigo</th>
            <th>Nombre</th>
            <th>Propietario</th>
            <th>Direccion</th>
            <th>Numero telefonico</th>
            <th>Aprobaci√≥n</th>
          </tr>
        </thead>
        <tbody>
          {% for rec in recicladoras %}
          <tr>
            <th scope="row">{{ rec.codigo_recicladora }}</th>
            <td>{{ rec.nombre }}</td>
            <td>{{ rec.propietario.nombre }} {{ rec.propietario.ap_paterno }}</td>
            <td>{{ rec.ciudad }}, {{ rec.codigo_postal }}, {{ rec.calle }}, {{ rec.colonia }}, {{ rec.numero_int }}</td>
            <td>{{ rec.numero_telefonico }}</td>
            <td>
              <form action="{% url 'administradores:aprobar_recicladoras' %}" method="post" style="display:inline;">
                {% csrf_token %}
                <input type="hidden" name="{{ rec.pk }}" value="True">
                <button type="submit" class="btn btn-success btn-sm">Aprobar</button>
              </form>
            </td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    {% else %}
      <p class="text-center my-4">No hay solicitudes por atender.</p>
    {% endif %}
  </div>
</div>
{% endblock %}
